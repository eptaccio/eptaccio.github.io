<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[eptaccio]]></title><description><![CDATA[A starter blog demonstrating what Gatsby can do.]]></description><link>https://gatsby-starter-blog-demo.netlify.com</link><generator>GatsbyJS</generator><lastBuildDate>Wed, 17 Jun 2020 13:52:00 GMT</lastBuildDate><item><title><![CDATA[Construindo o chatbot da Bienal da Quebrada]]></title><description><![CDATA[A Bienal do Livro da Quebrada tem como missão a democracia de oportunidades. Levar para as favelas e periferias a literatura e um evento…]]></description><link>https://gatsby-starter-blog-demo.netlify.com/quebradinha-bot/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.com/quebradinha-bot/</guid><pubDate>Tue, 16 Jun 2020 22:43:39 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/66afbe54f0f8c62b34d554994c0444cd/5a190/quebradinha.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAC4jAAAuIwF4pT92AAADsElEQVQ4y42U/U/TRxzH+1fsl8Vky2YEAlLtOu3T97GlQikEhJgs0iqgK9CiQZ5k0CKrsMKwAy2F0k2wJaBVkCWgJh30ubQWQRqZG5uu6ha2ZCTbfkC/D70d4JS5/UDyuc/dJfe6u/f7Lh8O7meIfwe+4+DA1WIvLfJQMAth9lCYl8J99I5gxMeo7yerHoLKB+DMCih7AHIWARkFO4LxMMhy3EWarSL9oMzQf+Bs3zvV5lSzGw8BYut8mH0U7v+fu3CwDXhe2TWa1zMubXcgRkeRaajQ7s4Og4MeSFJYKIneBXiQ/a8WjtDD6FeSzt/A5VVw6RfQ8hgM/Ar6n4HWZfZYjJHOA/n0an7PNHZnDY+AN3iOxMdULNC192njMt0Up7ULtG6BgoPeFeZSApzsm2olyZzd7/KkBdhEAmrcznNgw/wM6mMkXgaaB6dwAJ3PmgNZt1Zr+PuGBbsrBdzc995GsotJ73M8wL7Sz9nq3nhh0kthUXDIOjOXmx47vN8u4904xK0VZiDOJWIObPq3Dd7iZQFGGmDkQQi/EMXA0e6xuHJPM5I5JONaiIzz4jTSHkbmIfziNUz6GaGX0S6y/Y/Yujjb9i3b/pAhQ+Co9pPFvLRrCp5Dlm6SpOmLckW31wrHvydm/sBC4CVM/APrlzdiOMHafwKyAF1ouvrzcZGLTKnj7hkV7uowWfbFQUtrh+5suxj+glfXhoblhxlVjC27x9bH2ZIYo3U/sXZabDkHHGiqgZvSrJTmD3k/jAFDt8Wl2Eu4/8SC4LVmaLXYu2E115Msm/puzPqV9vMRoqS2VJE1WF6UUm5IbbJlXH/U+OUNR4EAcf+Fb4e3DJcG2IMe6prrTkPD+V06c2b9F4XnupyfNb5f0dlxrltunnQaTieK08mRJTS6Dd4MWhJIFsystdkm9p66INV9erhGc9pY9+Ngh6yh93ZPv0uj/uGjD2IqtLRvHPXTm3CAJYLQAJbwUUgU5A58M1kiv1qENatUmXU2cU1n/GJbS5fZ3FRq0siM1YraSqK8SkFOP9uA0dl1ya3fsdl13Ptc4qFw573Rxiq3ipwUvHXkeDV6JVJxecY+MtBajx05ISrTYRUnM4vb9WgYcATjCa7Fl2Z08a8sEWEANyICDD8ElFNPqi6OSeyRj78Ouy6ciVg1pzT8E+qMUvX+Y2petnMWmwMc4c2n/OFFnj0qnHhKhF7WANJPI0EghCUhAhBfMm/6sbant0DfqDRb5bab0tEI7lmHYv8GMtPOr/xnbsQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;quebradinha, o personagem do bot&quot;
        title=&quot;quebradinha, o personagem do bot&quot;
        src=&quot;/static/66afbe54f0f8c62b34d554994c0444cd/a6d36/quebradinha.png&quot;
        srcset=&quot;/static/66afbe54f0f8c62b34d554994c0444cd/222b7/quebradinha.png 163w,
/static/66afbe54f0f8c62b34d554994c0444cd/ff46a/quebradinha.png 325w,
/static/66afbe54f0f8c62b34d554994c0444cd/a6d36/quebradinha.png 650w,
/static/66afbe54f0f8c62b34d554994c0444cd/5a190/quebradinha.png 800w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;A &lt;a href=&quot;https://twitter.com/bienalquebrada&quot;&gt;&lt;strong&gt;Bienal do Livro da Quebrada&lt;/strong&gt;&lt;/a&gt; tem como missão a democracia de oportunidades. Levar para as favelas e periferias a literatura e um evento literário que dialogue na linguagem de quem teve e tem o acesso negado. As Bienais ocorrem sempre nos grandes centros, a distância geográfica e social afasta desses eventos as pessoas que moram nas periferias, ainda que haja uma tentativa de inclusão, ela é feita de maneira que quem vem das periferias não se sentem pertencentes a esses espaços.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Felizmente a Bienal recebe várias solicitações de pessoas querendo doar livros, então o criador do movimento, &lt;a href=&quot;https://twitter.com/alamoju&quot;&gt;@alamoju&lt;/a&gt; me chamou e perguntou se seria possível automatizar um pouco o processo de doações via DM do Twitter.&lt;/p&gt;
&lt;p&gt;Já tinha feito algumas coisas utilizando a API do Twitter mas o de Direct Messages era novidade para mim até então. Ainda estamos trabalhano no bot mas vou mostrar como foi essa saga até agora.&lt;/p&gt;
&lt;h3&gt;Conseguindo keys da API do Twitter&lt;/h3&gt;
&lt;p&gt;O Twitter trabalha com APPS (aplicações) dentro da plataforma. Essas aplicações podem ser distribuídas ou não. Cada aplicação tem seus tokens de acesso entre outras coisas para organização.&lt;/p&gt;
&lt;p&gt;Apenas &lt;a href=&quot;https://developer.twitter.com/en/apply-for-access&quot;&gt;contas de desenvolvimento&lt;/a&gt; no Twitter podem criar APPS. Essas contas são, perfils normais do Twitter, que fizeram a solicitação para o modo de desenvolvimento.&lt;/p&gt;
&lt;p&gt;Eu já tinha minha conta pessoal ativada no modo desenvolvedor. Uma opção seria criar o APP no meu perfil e posteriormente instalar o mesmo na conta da Bienal. Esse modo de instalação é o mesmo que você faz quando autoriza um APP de terceiros na sua conta.&lt;/p&gt;
&lt;p&gt;Eu preferi solicitar o acesso das features de desenvolvimento para a conta da própria Bienal, para que no futuro não distante as pessoas não ficassem dependentes de mim caso quisessem fazer alguma alteração no chatbot ou no próprio APP.&lt;/p&gt;
&lt;h4&gt;Solicitando o acesso&lt;/h4&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e1d2e508569204830ed567d3a98caa80/79daf/dev_account_1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 59.50920245398773%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAC4jAAAuIwF4pT92AAAB8ElEQVQoz52T3W7TQBCF8yAQxB2kUBCo7wePgAQRqFA1Ka0qrrhAXHJFq1JSJCQa56+x3fXau+u/OGlimjQ5zDppAiUVEpa/ndmz6yPP2JtbKVu4r9m6wjKNWL0GvVYoWcgVSiZub5jIb1i4NSP/xpznV7Wbr9u4sX7yF3nS9cvl9PB0T2C9wlH86uHFFwcvKwLPDxhFD8VDnvHqSGTzzR8xytVkTuk4wbaR4Nm36NLQxnevi3EsEQuO2HMw7EbohzKjq1wkklOu0PM9XHdF6Qi62lyBXPedHpI4BBcKngrgSgXmeuCehFB+FjWu1LlA22Zwaa8KI3h+gDDwYcgu7m3ZU8MDbRhIWPYpHIcTDlwyZBQZY7BtO9MZcyCEAOccnU4HaZqid3aGYdqHGaezksn1sx3DbNRwbBBVA0athlarhXqjgUaziaphUN78QzNob5NivdkCP2UwO+eLj7LPuoh9CRWEUL6fIahsqVSm+VSWVFPNDwJ6S5nNf54PqXtjYgIxuOwhDYduP2vsxZgWJ5MpmGT3fP47mazjBapshI9HI3yqp3jwdvYffmglcJMUJ+EAZjSlHS3yZei9bi/Fu8oAT94PUNzr4eH2zFCfitV/nISlp4Oee7xjYW3XwqMda1qy7uFdSv6XO5sLVsomfgHGARJyS9my6QAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;dev account&quot;
        title=&quot;dev account&quot;
        src=&quot;/static/e1d2e508569204830ed567d3a98caa80/a6d36/dev_account_1.png&quot;
        srcset=&quot;/static/e1d2e508569204830ed567d3a98caa80/222b7/dev_account_1.png 163w,
/static/e1d2e508569204830ed567d3a98caa80/ff46a/dev_account_1.png 325w,
/static/e1d2e508569204830ed567d3a98caa80/a6d36/dev_account_1.png 650w,
/static/e1d2e508569204830ed567d3a98caa80/e548f/dev_account_1.png 975w,
/static/e1d2e508569204830ed567d3a98caa80/3c492/dev_account_1.png 1300w,
/static/e1d2e508569204830ed567d3a98caa80/79daf/dev_account_1.png 2792w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;O primeiro passo foi solicitar acesso a uma &lt;a href=&quot;https://developer.twitter.com/en/apply-for-access&quot;&gt;conta de desenvolvimento&lt;/a&gt; no Twitter. Essa parte é fácil mas um pouco chata. Respondi os questionários até o final. &lt;/p&gt;
&lt;p&gt;O Twitter demorou um pouco para autorizar a solicitação, talvez pelo número de seguidores da conta, quem eram muitos.&lt;/p&gt;
&lt;p&gt;Se você for criar o seu chatbot, se prepare para um formulário bem chato.
Recomendo que você descreva exatamente o que irá fazer com os poderes que irá conseguir, já que o pessoal está meio embaçado com as autorizações. &lt;/p&gt;
&lt;p&gt;Se você está apenas estudando, coloque isso lá, assim, a autorização costuma ser mais rápida, quase instantanea.&lt;/p&gt;
&lt;p&gt;Ah, as respostas (e as perguntas) são em inglês, então se você não estiver confortavel, vai na fé com o &lt;a href=&quot;https://translate.google.com/&quot;&gt;tradutor&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Depois do processo feito, você deve ter uma tela como essa:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9a9bc23a3bf9e581f3d014f46b698df7/8ecb0/apps-twitter.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 63.80368098159509%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsSAAALEgHS3X78AAACMElEQVQ4y31T204TURQ9XtAoYlSMJiYqGmNioqK8+3NqIkrv2IooGoFHMV5jovGlYEsv08ILFIOY+CoJnXZKp9NzznLvM22daONMVvZa+7L2nocR02ctzI2u4tnlMh6fKeLpxZLBzKUynlwo+Rjx4xTVH50mnCpg+pyF51e4x8LMyCoS579g6tYCRMOWqG5LeI5EK4i6n+vmvT5wqQeuxOdiC/HXLl6mWxAtpVH1NPo9uvMG+d8vV3bbGrarUW9piF8NhU8/NRyngZpdg12tUaxTtCGlws6OjUZjF1oBipb/A6mxbSs4TWqAglC0waWkgoRUbUjdhtI+5wsMJyBwEQKX8yONlf8dYuuDxNY7D5sE5t/ft7H51qMo8eOj6kAH+B98e9NCZaGJjVdNE1mL3EQTi3dryIWaKMY8EzP3HOQjLlZSGitJ5SPVQUBnxh2kb9tmPn3HNlrMXl/H7CiB4otra5i7WcH82AZx0lfXMHtj3YA513uaOc3Mj1XMPGuGCIkMGONi0SAksojsW8YDsYT7pMN7s4gO5IgvGXAtQjnuZR07mMOE+NrTIn44j+QJC+E9WWOcGCogOWwhdiBncpNDRUweLRoTNufe5HAJicGCWcQ6MZg3i7jfGCaOFEwzG7JBigbCwtcPj1n0d5QR3b9srk+dLNGfUgLPsQHXmHMvz4j4oXzvInMhbU4et8xFrDnPA75hxnxil7MhzzKiA35O8KnRjll3Sz/+vxrzrv4NcCkVL38b69UAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;dev account&quot;
        title=&quot;dev account&quot;
        src=&quot;/static/9a9bc23a3bf9e581f3d014f46b698df7/a6d36/apps-twitter.png&quot;
        srcset=&quot;/static/9a9bc23a3bf9e581f3d014f46b698df7/222b7/apps-twitter.png 163w,
/static/9a9bc23a3bf9e581f3d014f46b698df7/ff46a/apps-twitter.png 325w,
/static/9a9bc23a3bf9e581f3d014f46b698df7/a6d36/apps-twitter.png 650w,
/static/9a9bc23a3bf9e581f3d014f46b698df7/e548f/apps-twitter.png 975w,
/static/9a9bc23a3bf9e581f3d014f46b698df7/8ecb0/apps-twitter.png 989w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;No meu caso criei um APP chamado &lt;strong&gt;“xiaomi é melhor que apple”&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;É necessário configurar o APP para ter acesso a Direct Messages do Twitter.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/692d3801559b14ef557f6190b2deed9e/97bfd/dm-permition.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.282208588957054%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsSAAALEgHS3X78AAABQUlEQVQoz42T3XKCMBCFff+H6m2foL3wUkFAIa2QQH42Oe6G2o6C2sx8k2QgZ89uNhttDMwUoAZC1wd0PDtPiERIkWeG6P9svPdovzQLevQjoe4MBuOQEqB0grYJvMz7BViOzVU5pSjH4JyFYdeToyxmGIosmpZEId6SBZEdzPGkBOWhyrOkG0KA97c4JgRaDbIQDLwPFPOBe7yIZ+Y9xXhzdlXQjCNObYu2U9nNX0nWKoZfZw8FJ2tRVTX6fshuxY3jixM3aym+dOicQ9M0UEphZLdaazwbszAeCw7DgKIoUZQljqcO42RhOYhbQS7spUMR3O93KIsCZ9XguzuiLivUdf1DwyWpUPFasph7cuWWryNQwugBy8HfPiM+dvz97p+H6Utji+3IBb8iz+5suKknwvvWY3sIuelz69DMs6d3AZekrohQYF+zAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;dm-permition&quot;
        title=&quot;dm-permition&quot;
        src=&quot;/static/692d3801559b14ef557f6190b2deed9e/a6d36/dm-permition.png&quot;
        srcset=&quot;/static/692d3801559b14ef557f6190b2deed9e/222b7/dm-permition.png 163w,
/static/692d3801559b14ef557f6190b2deed9e/ff46a/dm-permition.png 325w,
/static/692d3801559b14ef557f6190b2deed9e/a6d36/dm-permition.png 650w,
/static/692d3801559b14ef557f6190b2deed9e/e548f/dm-permition.png 975w,
/static/692d3801559b14ef557f6190b2deed9e/97bfd/dm-permition.png 1078w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;Webhook do twitter&lt;/h3&gt;
&lt;p&gt;Para a parte de comunicação, parti para pesquisar como o twitter trabalhava com a parte de chats. Felizmente encontrei uma parte da API deles chamada de &lt;a href=&quot;https://developer.twitter.com/en/products/accounts-and-users/account-activity-api&quot;&gt;Account Activity API&lt;/a&gt;. Essa API permite que você cadastre webhooks para ações de uma conta, uma nova DM, novos seguidores e coisas do tipo.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f371884fbdc0a255f11a71ce3d32c9ba/bb5d0/twitter-apiatividades.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 26.993865030674847%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsSAAALEgHS3X78AAAA3ElEQVQY032QSW7DMAxFfelsG/QwXTW+R1C0JygaZ2FnsI2iVjRR0w9pocimKIEHfVIS8cnGOYcQAlJKiDFWWBPXAmupy+mJQIz3BPcHcme5VyMNtNYYhjMu1wl9f2I9sB4xzTO6rsOyKEiUUvBfeApoiKo7qybQjXEGUludhgiZQO5/4zhm7D8T3g/MV+WDtaXCkxIaGUXCGgOlFmhjsdwEs+qaa/woA+SA9i1h8+Lx3BKeXivbHWH4LihpdUjIOfOeZG+xwg5lhzV/6MhvSsnsOPOeH6f8l7r0ugN9X4CX0FwhNgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;imagem da api de ativaves&quot;
        title=&quot;imagem da api de ativaves&quot;
        src=&quot;/static/f371884fbdc0a255f11a71ce3d32c9ba/a6d36/twitter-apiatividades.png&quot;
        srcset=&quot;/static/f371884fbdc0a255f11a71ce3d32c9ba/222b7/twitter-apiatividades.png 163w,
/static/f371884fbdc0a255f11a71ce3d32c9ba/ff46a/twitter-apiatividades.png 325w,
/static/f371884fbdc0a255f11a71ce3d32c9ba/a6d36/twitter-apiatividades.png 650w,
/static/f371884fbdc0a255f11a71ce3d32c9ba/e548f/twitter-apiatividades.png 975w,
/static/f371884fbdc0a255f11a71ce3d32c9ba/3c492/twitter-apiatividades.png 1300w,
/static/f371884fbdc0a255f11a71ce3d32c9ba/bb5d0/twitter-apiatividades.png 1453w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Para ativar a API, &lt;a href=&quot;https://developer.twitter.com/en/account/environments&quot;&gt;acesse esse link&lt;/a&gt; e configure um novo ambiente. Eu achei a documentação do Twitter bem fraca nesse sentido, tive que dar várias voltas para encontrar o que queria.&lt;/p&gt;
&lt;p&gt;Após o registro do ambiente da Account Activity API o próximo passo foi de fato cadastrar uma API minha de Webhook no Twitter. Cada passo é uma chamada HTTP na API do twitter, sendo assim são dois passos:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Registrar Webhook&lt;/li&gt;
&lt;li&gt;Adicionar uma “subscription” na conta para ativar o Webhook&lt;/li&gt;
&lt;/ul&gt;
&lt;h4&gt;Registrar webhook&lt;/h4&gt;
&lt;p&gt;A API registrada como Webhook deve ter uma rota com mapeamento GET e POST. No meu caso usei &lt;code class=&quot;language-text&quot;&gt;/webhooks/twitter&lt;/code&gt;. Inicialmente o twitter irá fazer um GET nessa rota, para validar se sua API está nos conformes deles.&lt;/p&gt;
&lt;p&gt;No GET eles te informan um &lt;code class=&quot;language-text&quot;&gt;crc_token&lt;/code&gt;, você tem que gerar um HASH maluco com essa informação e um dos tokens do twitter (consumer secret) e devolver para eles. Se você fizer o cálculo certo, o twitter irá assumir sua API como um Webhook válido.&lt;/p&gt;
&lt;p&gt;Segue um pedaço da implementação:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const getChallengeResponse = ({
  crcToken,
  consumerSecret
}) =&amp;gt; {
  const hmac = crypto
    .createHmac(&amp;#39;sha256&amp;#39;, consumerSecret)
    .update(crcToken)
    .digest(&amp;#39;base64&amp;#39;)

  return hmac
}

app.get(&amp;#39;/webhooks/twitter&amp;#39;, (req, res) =&amp;gt; {
  const crcToken = req.query.crc_token

  const hmac = getChallengeResponse({
    crcToken,
    consumerSecret: TWITTER_AUTH.consumer_secret
  })

  res.send({
    response_token: `sha256=${hmac}`
  })
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Eu criei minha API usando &lt;code class=&quot;language-text&quot;&gt;express&lt;/code&gt; e subi utilizando o &lt;a href=&quot;https://vercel.com/&quot;&gt;now.sh&lt;/a&gt;, que agora é &lt;a href=&quot;https://vercel.com/&quot;&gt;vercel&lt;/a&gt;. A configuração de deploy foi quase a mesma de &lt;a href=&quot;/telegram-bot/&quot;&gt;um post anterior meu&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Com a &lt;strong&gt;MINHA API&lt;/strong&gt; no ar, fiz o cadastro do Webhook no twitter.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fe10c0876552a28bc5dcd62a25026e52/38116/post-webhook.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 39.877300613496935%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAABUUlEQVQoz1VRWbKCQAzkMGwygArMsMkieASrtBTUD0/h5fsl4VGlH12dpDNJz4z1+Xxwu93weDwwzZPw8/n8wm/+er0WlnipzfOMaZqErev1irZtUVUViqJA13UYxxGn0wld31Pe43g8CtY68zASUzwMo5zN8xxlWcLiqbtkD10aZIWGNhoFCXudYOhblPXSyAd44br4QHqtU1QEQxrrWZbBut/v0tB2LZq2EbeHpkG8jVHuQphdhDBkhIIoWuJIBVBKIWRQzjHDOp/PiOMYdV3LBqM10jSFCqgxiuF6PlzHgeu6Aodi3/cRbDaIAx+K2PM80bguDvndeIvnuSIyeFtDTvPcIEkSWcaLsiwl91txpiOFbajg01AetiG2LpeLNHNhdbGCr8fu16uuOffa5JThOItr27aFrff7DWMM/dYgTr/R0y/zm36DXf/0/DNrzH9qYQ2M74XVhwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;print do postman&quot;
        title=&quot;print do postman&quot;
        src=&quot;/static/fe10c0876552a28bc5dcd62a25026e52/a6d36/post-webhook.png&quot;
        srcset=&quot;/static/fe10c0876552a28bc5dcd62a25026e52/222b7/post-webhook.png 163w,
/static/fe10c0876552a28bc5dcd62a25026e52/ff46a/post-webhook.png 325w,
/static/fe10c0876552a28bc5dcd62a25026e52/a6d36/post-webhook.png 650w,
/static/fe10c0876552a28bc5dcd62a25026e52/e548f/post-webhook.png 975w,
/static/fe10c0876552a28bc5dcd62a25026e52/3c492/post-webhook.png 1300w,
/static/fe10c0876552a28bc5dcd62a25026e52/38116/post-webhook.png 2086w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;POST&lt;/strong&gt;
&lt;code class=&quot;language-text&quot;&gt;https://api.twitter.com/1.1/account_activity/all/{NOME_DO_SEU_AMBIENTE}/webhooks.json&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;A requisição deve ser feita utilizando a autenticação &lt;strong&gt;OAuth 1.0&lt;/strong&gt;. Dentro do APP no twitter é possível encontrar todos os tokens.&lt;/p&gt;
&lt;h4&gt;Registrando Inscrição (subscription)&lt;/h4&gt;
&lt;p&gt;Após o cadastro do Webhook é necessário ativar a inscrição daquele Webhook para o seu usuário na API de &lt;strong&gt;Account Activity API&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/04edb3073a4e25cc6ad5ef9881b322cf/48ca3/sub-req1.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.079754601226995%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsSAAALEgHS3X78AAABn0lEQVQoz11SW27CMBDkKgjydOw4zovQF1Tipx8VDQUBR6gqJG7QOxSJj96gPUlPNd01MaX9GK033p2dnbg3nz9huVxhu91is9lgvV7beMoJ3ffFYvGL52cs20c8bF9Qv33j+vUDm1WLz88v9OrS4KqpUVQVyrpEVVeo6FyPRhhVJZrCIDcGWmdQSnVIkSoJoUv4V3MExT1MpnE8HtErtMKImzIq0ik1aqQpnzU0RSkEBCGMIoRheEIQ2BiFAWKvj9Af2JrD4YCelgkqk+FmPEbTNGhIGSssy9LGoiggSVXQkXCMiJzjcDi0g3w6CxGfCAeDIaRUyKkxy8zFWn/hiPr9Ptq2xW63w2Qyged59u6sMEkSMOIoRKESZFIg7tZ0UBcKWdV0OsV+v8dsNrM538Vxp9D6RVCJwHWuLUzno/PTETqV3OzAue/7vwq5mC8kecBkjTkNOA/qVj7/EP4ZROLgfP1HKOzKvG5KSjnnAh7kVmavWAk3c3Tg3KN4XtlNtYUdgguwCkke397d2beZ0XvL8xyG3qYDe89P7J0IfwCyS0lP0pZ0ZwAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;print do postman&quot;
        title=&quot;print do postman&quot;
        src=&quot;/static/04edb3073a4e25cc6ad5ef9881b322cf/a6d36/sub-req1.png&quot;
        srcset=&quot;/static/04edb3073a4e25cc6ad5ef9881b322cf/222b7/sub-req1.png 163w,
/static/04edb3073a4e25cc6ad5ef9881b322cf/ff46a/sub-req1.png 325w,
/static/04edb3073a4e25cc6ad5ef9881b322cf/a6d36/sub-req1.png 650w,
/static/04edb3073a4e25cc6ad5ef9881b322cf/e548f/sub-req1.png 975w,
/static/04edb3073a4e25cc6ad5ef9881b322cf/48ca3/sub-req1.png 1084w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;POST&lt;/strong&gt;
&lt;code class=&quot;language-text&quot;&gt;https://api.twitter.com/1.1/account_activity/all/{NOME_DO_SEU_AMBIENTE}/subscriptions.json&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Depois disso, o twitter passa a enviar alguns eventos na API. Os que eu utilizei foram os de DM, as informações chegam num objeto assim:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;json&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;{
  &amp;quot;direct_message_events&amp;quot;: [{
    &amp;quot;type&amp;quot;: &amp;quot;message_create&amp;quot;,
    &amp;quot;id&amp;quot;: &amp;quot;1299858332&amp;quot;,
    &amp;quot;created_timestamp&amp;quot;: &amp;quot;1333079023603&amp;quot;,
    &amp;quot;message_create&amp;quot;: {
      &amp;quot;target&amp;quot;: {
        &amp;quot;recipient_id&amp;quot;: &amp;quot;10948585902&amp;quot;
      },
      &amp;quot;sender_id&amp;quot;: &amp;quot;38051043333174&amp;quot;,
      &amp;quot;message_data&amp;quot;: {
        &amp;quot;text&amp;quot;: &amp;quot;eae ma broda&amp;quot;,
        &amp;quot;entities&amp;quot;: {
          &amp;quot;hashtags&amp;quot;: [],
          &amp;quot;symbols&amp;quot;: [],
          &amp;quot;urls&amp;quot;: [],
          &amp;quot;user_mentions&amp;quot;: []
        }
      }
    }
  }]
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h3&gt;Contruindo o fluxo do chatbot&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7d18fb27eedeae99b15848bae894f5c5/d6f75/bot_dm.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAwT/2gAMAwEAAhADEAAAAaMezFbP1RaEawbgn//EABkQAAMBAQEAAAAAAAAAAAAAAAECAwASIf/aAAgBAQABBQK7FESzl9bxeuqZlDARQHf/xAAYEQACAwAAAAAAAAAAAAAAAAABEAIREv/aAAgBAwEBPwGAGVZX/8QAGBEAAgMAAAAAAAAAAAAAAAAAARACESL/2gAIAQIBAT8BkdKgv//EABoQAAIDAQEAAAAAAAAAAAAAAAERABAhAnH/2gAIAQEABj8CYgDoezjFtIxqv//EABkQAQADAQEAAAAAAAAAAAAAAAEAESEQMf/aAAgBAQABPyG0tNxnYXeMUl14gaWXFKbIEGjzef/aAAwDAQACAAMAAAAQB8B8/8QAFxEBAQEBAAAAAAAAAAAAAAAAARARUf/aAAgBAwEBPxBjU7AjBn//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQIBAT8QYAMUdSf/xAAdEAEAAgICAwAAAAAAAAAAAAABESEAEDFBYZGh/9oACAEBAAE/EAlYkx1eJJTgQ49acaRYd04fAhni78amyBmBS8R+PKmx91//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;bot bienal&quot;
        title=&quot;bot bienal&quot;
        src=&quot;/static/7d18fb27eedeae99b15848bae894f5c5/6aca1/bot_dm.jpg&quot;
        srcset=&quot;/static/7d18fb27eedeae99b15848bae894f5c5/d2f63/bot_dm.jpg 163w,
/static/7d18fb27eedeae99b15848bae894f5c5/c989d/bot_dm.jpg 325w,
/static/7d18fb27eedeae99b15848bae894f5c5/6aca1/bot_dm.jpg 650w,
/static/7d18fb27eedeae99b15848bae894f5c5/7c09c/bot_dm.jpg 975w,
/static/7d18fb27eedeae99b15848bae894f5c5/01ab0/bot_dm.jpg 1300w,
/static/7d18fb27eedeae99b15848bae894f5c5/d6f75/bot_dm.jpg 8000w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Se você abrir o chatbot da Bienal hoje, vai receber uma mensagem de boas vindas (como na imagem acima). Essa mensagem de entrada é um recurso do Twitter chamado &lt;strong&gt;“Welcome Messages”&lt;/strong&gt;. Com essa mensagem, dois botões cada passo é uma chamada HTTP na API do Twitter irão aparecer no chat.&lt;/p&gt;
&lt;p&gt;Na primeira versão eu estava utilizando o &lt;strong&gt;callback&lt;/strong&gt; desses botões para &lt;strong&gt;triggar&lt;/strong&gt; ações e mensagens. Entretanto atualmente estamos melhorando os fluxos com a utilização de &lt;strong&gt;NLP&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NLP&lt;/strong&gt; ou Processamento de Linguagem Natural em português, é uma subárea da inteligência artificial, bem conhecida no meio de chatbots. O chatbot recebe uma mensagem, faz o processamento usando as ferramentas de &lt;strong&gt;NLP&lt;/strong&gt; e à partir disso, consegue saber qual é a &lt;strong&gt;“intenção”&lt;/strong&gt; do usuário, para que programaticamente você tomar possa tomar uma ação. É necessário mapear as possíveis intenções para que não ocorram erros.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/afa9108cf16a8fc6a4bc651df5ed2286/29114/nlp_desenho.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.288343558282207%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABPklEQVQY02N45lEq9Ng4VR6IZR6bpMk80k6QemqXJ/MivYeJAQie+VS43vAoDL/lUeT70rfKGiT2xDKL+Yl5hjpQvSIQKzzSipd6bJqu8lg/WYDhuX/V8VfpPWdfpXaffpXcefp17sTjL6KbrwItqgPK6T73rXQHGhQOxK7PfCvtn3mWaT0PrKl4ldF7G4hPA/HZ1zkTzrzO7j//MqblJMhAL6BBni8TOzxfxrd7vkrr8XwR0egH1KgHlOMDutAdiKOAOAhouOUzrzK+5wHVWkAHANV2OwNpV6ChIOzyIqrZjYEQeOZTKQ/ErkBsDzRUgKCG535VTC9jW5mAzmUCepXpZUI704vQeqZn3uWwMOQFYnMgFofyGZ/7VzO+jG9jAvqICUwndoDxi/AGJlyugtIVqJb7QsWB9DMoGx0AAGyjpZw1+KDVAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;explicação nlp&quot;
        title=&quot;explicação nlp&quot;
        src=&quot;/static/afa9108cf16a8fc6a4bc651df5ed2286/a6d36/nlp_desenho.png&quot;
        srcset=&quot;/static/afa9108cf16a8fc6a4bc651df5ed2286/222b7/nlp_desenho.png 163w,
/static/afa9108cf16a8fc6a4bc651df5ed2286/ff46a/nlp_desenho.png 325w,
/static/afa9108cf16a8fc6a4bc651df5ed2286/a6d36/nlp_desenho.png 650w,
/static/afa9108cf16a8fc6a4bc651df5ed2286/e548f/nlp_desenho.png 975w,
/static/afa9108cf16a8fc6a4bc651df5ed2286/3c492/nlp_desenho.png 1300w,
/static/afa9108cf16a8fc6a4bc651df5ed2286/29114/nlp_desenho.png 1920w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Essas intenções não saem do nada, é necessário fazer um “treinamento” prévio, passando exemplos de frases que o usuário pode enviar em cada intenção. Esse treinamento gera um MODEL, que no final das contas são vários processamentos salvos para que, quando seja necessário o processamento de intenção seja mais rápido.&lt;/p&gt;
&lt;h4&gt;Akamaru Framework&lt;/h4&gt;
&lt;p&gt;Recentemente iniciei o &lt;a href=&quot;https://github.com/eptaccio/akamaru&quot;&gt;Akamaru framework&lt;/a&gt; escrito em &lt;strong&gt;TypeScript&lt;/strong&gt;, uma ferramenta para facilitar a parte do gerenciamento de estados e intenções, além da parte de NLP. É baseado na minha experiência com soluções para chatbot como: IBM Watson, Dialog Flow, entre outros.&lt;/p&gt;
&lt;p&gt;Com o Akaramu consigo fazer o treinamento dos modelos de intenções e definir os fluxos à partir de um objeto javascript. Nessa organização temos &lt;strong&gt;estados&lt;/strong&gt;, &lt;strong&gt;intenções&lt;/strong&gt;, &lt;strong&gt;ações&lt;/strong&gt; e &lt;strong&gt;resolvers&lt;/strong&gt;. &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Estado&lt;/strong&gt;   &lt;/li&gt;
&lt;/ul&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const botDefinition = {
  allIntents: ,
  language: &amp;#39;pt&amp;#39;,
  states: [
    {
      name: &amp;#39;START&amp;#39;,
      startTexts: [
        &amp;#39;Oi, como posso te ajudar?&amp;#39;,
        &amp;#39;Vamos lá, como posso te ajudar?&amp;#39;
      ],
      actions: startActions,
      unknownIntentAction: {
        responses: [
          &amp;#39;Não te entendi muito bem :/&amp;#39;
        ]
      }
    }
  ],
  resolvers: {
    getSession,
    saveSession
  }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Configurações de textos iniciais, nome do estado e uma ação definida, para caso o processo de NLP não identifique nenhuma intenção mapeada para aquele estado. Um estado também agrupa &lt;strong&gt;ações&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Ações&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const startActions = [
  {
    onIntent: &amp;#39;SAUDACAO&amp;#39;,
    responses: [
      &amp;#39;Olá, tudo bem?&amp;#39;, &amp;#39;oi oi, estou aqui&amp;#39;
    ]
  },
  {
    onIntent: &amp;#39;GERENTE&amp;#39;,
    handler: async session =&amp;gt; {
      await sendNotification(session.userId)

      return {
        responses: [
         &amp;#39;Eita, vou chamar o brabo. Pera só um pouco&amp;#39;
        ],
        nextState: {
          name: &amp;#39;SILENCIO&amp;#39;
        }
      }
    }
  },
  {
    onIntent: &amp;#39;DOAR-GENERICO&amp;#39;,
    goToState: {
      name: &amp;#39;DOACAO&amp;#39;
    }
  }
]&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;As ações mapeam as respostas ou redirecionamentos para outros estados. As respostam são sempre um array, pois é possível declarar várias. O Akamaru vai escolher uma aleatória para devolver ao usuário, deixando assim o bot um pouco mais humanizado.&lt;/p&gt;
&lt;p&gt;No caso de intenções onde ação é mais complexa que só retornar uma resposta, é possível declarar um &lt;strong&gt;handler&lt;/strong&gt; e posteriormente retornar as possíveis respostas.&lt;/p&gt;
&lt;p&gt;As &lt;strong&gt;ações&lt;/strong&gt; são baseada em &lt;strong&gt;intenções&lt;/strong&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Intenções&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const allIntents = [
  {
    name: &amp;#39;SIM&amp;#39;,
    training: [
      &amp;#39;sim&amp;#39;,
      &amp;#39;pode&amp;#39;,
      &amp;#39;quero&amp;#39;,
      &amp;#39;preciso&amp;#39;,
      &amp;#39;manda ve&amp;#39;
    ]
  }
]&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;As intenções tem seu nome e exemplos de digitação do usuário. Os exemplos são utilizados no treinamento do MODEL. Quanto mais exemplos, mais acertivo fica a classificação de intenção.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;resolvers / gerenciamento da sessão&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Na definição do bot, temos uma parte destinada a resolvers. Esses são os métodos &lt;strong&gt;getSession&lt;/strong&gt; e &lt;strong&gt;saveSession&lt;/strong&gt;. Como os nomes dizem esses métodos recuperam e salvam a sessão do usuário, assim o usuário do framework (no caso eu mesmo) posso definir qual estratégia irei usar em cada bot.&lt;/p&gt;
&lt;p&gt;Nesse bot estou utilizando o &lt;a href=&quot;https://redis.io/&quot;&gt;Redis&lt;/a&gt;, um banco de dados open source que armazena dados em memória, para que a leitura e escrita seja mais rápida. É conhecido como um banco de cache.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;javascript&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const THIRTY_MINUTES = 1800000

const saveSession = async (userId, session) =&amp;gt; {
  return redis.set(
    userId,
    session,
    &amp;#39;ex&amp;#39;,
    THIRTY_MINUTES
  )
}

const getSession = async userId =&amp;gt; {
  return redis.get(userId)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;As sessões morrem depois de 30 minutos sem interação do usuário.&lt;/p&gt;
&lt;h3&gt;Resultado final&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/e0f81fb4da9018741cd1050293cc2687/a6e6b/bot_final_twitter.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAC4jAAAuIwF4pT92AAAD8klEQVQ4y7WUW08bRxTHvVfvrr2s7bXNrmXsBHBNwp20SbkFagKuRKAkBHMNRElUwBSTpkBDqHpTg9KHkPopQKhaNRKqlC/Vl/YLVArJjrT/zi4OGLVSX9qRjuaimd/8z5w5x3M2Gff8V82IRo4Gqt83bhjGrmGYT+j06VvTdf1JWNefK7LcJQjC5Zhp7kaj0W2GYY73BHV92zBjz1RVnTxBs+JBIFiBunQV6AyiwINjGTB0LHgViD7tM7q+XhEIoLGxFpIkQ5ZleCXJ3e/s43nxZbnaHS0UwYWOy6/qmi5YDW2XrJrzLZbglV85B1iOX6T9JxzHoTIaPqTKrXi8yoroIctf03po9k3DV/vufjlwL93WidnV78iNhXWMzq/j6p01RBIp6wjILdG+wHE8FLWCiJJkO+uO+RPnSaAtC28s/dMpYKq5HbfWtkgu/wDj+Q2MLj5ENPmOC5QUnwscHhnBn2/ekJ39fTugaaisrHSgpAQ/ASarAnuZoSHklr4gA1N5ONabW0AoYh4BRd4Fjk9MgDby8y8vbC2ow4zFwQsiBTLwMMwJ0KeIe6GwjkDEJGowAlkNQNHC8CUbLCmehjccd4FnzzVj5dsfyExh0x6cWcTg7DJitQ2uQqYc6Lhckv1WPr2RQzL/zEqtH0DPLrjAeKoRs/e/IVPLm/bc/a8xmt9E1bm2EpA9AQq8Zy9eXYvW7ixpas+gqaMPzV0D0IJh12XqVglYj6mVr8jYwue2G7yFDSSOgWUKq8/oex19GfSP3SGZazPoHZ7ExQ/H4PerLpDzeFygcaYO0ytfkrH5dfvG/Bqu3l5FPN1yBGS5f3GZmtY9aZlz34Orzy4lI2yhq78PI3fXyMjte3Ym9zEN3DyMRM3fo+wAGZYFL8mE5XkXxrEcwm19VmzgFqTU+0sS6ykE9RACukE0PWorNHCypsNf3ULk6lbwodhp4PTNm/jt9z/I8so9BGiK0Zx1wFbpdtflMi+OPjbDIz73mKQ3XiLUM3Ma+GBjw/1jj7a2IAgidD1M34W1PFQpTfYlr+ApmIkkWpzAdVyxmzuvoL69H+HKGCnl82ngpd4BPNo5IDPLD5G5PofM2F2EzOSxQhq4wnudF5G5Nks+GJm2uwZzaOoZQjSR+sc33DFrG9GRvX7Ymf2IZIbHSfdgjlToxqH7nqI37+HEZVZUnLx+zTIMKbnu2GuG5jjLiz8e0zjJ94KVVIiiSIPBlsoXDRKtLgwnUOM/5by+VU7RIMk+Wr4k+FWVjhX3jPMsLO/9tVzhhOO2oijbPM8XabEssixXpEV1m647N3dT66H2XBSFp84ev99fpJ+5SMdOod2lNuX5P9pfljCO1yAdfKoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;resultado final&quot;
        title=&quot;resultado final&quot;
        src=&quot;/static/e0f81fb4da9018741cd1050293cc2687/a6d36/bot_final_twitter.png&quot;
        srcset=&quot;/static/e0f81fb4da9018741cd1050293cc2687/222b7/bot_final_twitter.png 163w,
/static/e0f81fb4da9018741cd1050293cc2687/ff46a/bot_final_twitter.png 325w,
/static/e0f81fb4da9018741cd1050293cc2687/a6d36/bot_final_twitter.png 650w,
/static/e0f81fb4da9018741cd1050293cc2687/e548f/bot_final_twitter.png 975w,
/static/e0f81fb4da9018741cd1050293cc2687/3c492/bot_final_twitter.png 1300w,
/static/e0f81fb4da9018741cd1050293cc2687/a6e6b/bot_final_twitter.png 2917w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Iremos programar mais fluxos no bot conforme as necessidades surgirem. Por enquanto, ele consegue ajudar as pessoas à fazer doações de livros ou financeiras. Em qualquer fluxo é possível solicitar para falar com um humano, sendo assim uma notificação é disparada para o &lt;a href=&quot;https://twitter.com/alamoju&quot;&gt;@alamoju&lt;/a&gt; no Telegram.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Obrigado por ler até o final.&lt;/strong&gt;  &lt;a href=&quot;https://twitter.com/eptaccio/status/1273079391682285570&quot;&gt;Participe da discussão no twitter&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Se ficou interessado em chatbots, confira esse episódio do Quebradev, movimento onde faço parte. Falamos sobre a história, presente e implicações sociais de automatizações desse tipo.&lt;/p&gt;
&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 25.5%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;iframe src=&quot;https://anchor.fm/quebradev/embed/episodes/41---Tech-Chatbots-ee7jav&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; style=&quot; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot;&gt;&lt;/iframe&gt; &lt;/div&gt;</content:encoded></item><item><title><![CDATA[Automatizando o chrome com Node.js para zoar amigos]]></title><description><![CDATA[Estava revisitando meus repositórios antigos no github e achei um projeto de mais de um ano atrás, onde, eu configurava uma postagem alvo no…]]></description><link>https://gatsby-starter-blog-demo.netlify.com/puppeteer/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.com/puppeteer/</guid><pubDate>Mon, 27 Apr 2020 17:43:39 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/f62eb82b35c4aa8a7ec158d3200b6e37/1cfc2/logo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 46.62576687116564%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsSAAALEgHS3X78AAABQklEQVQoz52QzUrDQBDHe9AH0DfQx1IEtW/goaA3T4Km6MUqtigIil78OFVE0gYakiBC9OCpoTQ5NJ+kSQ9NJenf3TWxemix/mF2dnZmfzO7uU6n0ycC0ZCILkiGCY3B3V9h/aYMr+vDD7rI31awe3fJcnGSsNpUHymgkuv1en1iv4C0mOqxIWBhM4+Zow3MElssrOGhxk8GEj8a78t/A7nrc8wXVrBU2sFyhcPc1ir2Ls4mA8nSTw9HT06BxdMTNF5fskuQ3t+wfcCxfVYzdkIaZxNS0X/d54oQanXUhDqeeB7PsoLjwxKCIMDP2j8BPc+DrChoNpvQNI1Zq9WCqqqwLGt6YBiGUAjQtm2Ypgld1+E4DmtAm00NpM+SJAmiKKJarTIvyzJr8i+g7/tot9uI4xhRFGEwGLCcYRhwXXcs8BP5q5sHE002mgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Logo do puppeteer&quot;
        title=&quot;Logo do puppeteer&quot;
        src=&quot;/static/f62eb82b35c4aa8a7ec158d3200b6e37/a6d36/logo.png&quot;
        srcset=&quot;/static/f62eb82b35c4aa8a7ec158d3200b6e37/222b7/logo.png 163w,
/static/f62eb82b35c4aa8a7ec158d3200b6e37/ff46a/logo.png 325w,
/static/f62eb82b35c4aa8a7ec158d3200b6e37/a6d36/logo.png 650w,
/static/f62eb82b35c4aa8a7ec158d3200b6e37/1cfc2/logo.png 900w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Estava revisitando meus repositórios antigos no &lt;a href=&quot;https://github.com/eptaccio&quot;&gt;github&lt;/a&gt; e achei um &lt;a href=&quot;https://github.com/eptaccio/fbood&quot;&gt;projeto&lt;/a&gt; de mais de um ano atrás, onde, eu configurava uma postagem alvo no facebook, meu usuário e senha e com isso fazia um monte de comentários no mesmo.&lt;/p&gt;
&lt;p&gt;A gente não usa tanto facebook porem leia até o final, as vezes consegue ter uma ideia legal a partir dessa.&lt;/p&gt;
&lt;h3&gt;O que vamos fazer hoje:&lt;/h3&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 75%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/qlY5tlyO7lc&quot; style=&quot; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot;&gt;&lt;/iframe&gt;&lt;/div&gt; &lt;/div&gt;&lt;/p&gt;
&lt;h2&gt;Controlando o Chrome com puppeteer&lt;/h2&gt;
&lt;p&gt;Puppeteer é uma lib open source criada pelo google que disponibiliza uma série de métodos para controle do chrome de forma automatizada, clicks, execução de scripts no console do browser, prints-screens, downloads entre outros. Quase tudo que um usuário faz, porem de forma programática com Node.js.&lt;/p&gt;
&lt;h2&gt;Criando o script&lt;/h2&gt;
&lt;h3&gt;I - Instalando a dependência, puppeteer x puppeteer-core&lt;/h3&gt;
&lt;p&gt;O jeito mais fácil e simples é instalando o &lt;strong&gt;puppeteer&lt;/strong&gt;, conforme o código abaixo.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;sh&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;npm add puppeteer&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Existe outra opção de instalação: &lt;a href=&quot;https://www.npmjs.com/package/puppeteer-core&quot;&gt;&lt;strong&gt;puppeteer-core&lt;/strong&gt;&lt;/a&gt;. Qual a diferença?&lt;br&gt;
Se você instalar o &lt;strong&gt;puppeteer&lt;/strong&gt; da forma simples, junto com os códigos será baixado uma versão do chrome para sua &lt;strong&gt;node_modules&lt;/strong&gt; também.&lt;/p&gt;
&lt;p&gt;No &lt;strong&gt;puppeteer-core&lt;/strong&gt; você consegue informar um browser que já existe na sua máquina.&lt;/p&gt;
&lt;p&gt;Eu geralmente faço a instalação normal pela comodidade.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a8023e440fa3cb4d7a930c3c378db219/4b190/node-modules-size.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 71.77914110429448%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEAMQAAAB21LEUkP/xAAaEAACAwEBAAAAAAAAAAAAAAABAgARIRIy/9oACAEBAAEFAis51RhVrqL5/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGBAAAgMAAAAAAAAAAAAAAAAAARAAESH/2gAIAQEABj8CMpYX/8QAGhAAAwADAQAAAAAAAAAAAAAAAAERITFBEP/aAAgBAQABPyHYrb4iO0nldrCLKt1yGo//2gAMAwEAAgADAAAAEF//AP/EABcRAQADAAAAAAAAAAAAAAAAAAABETH/2gAIAQMBAT8QpGP/xAAWEQEBAQAAAAAAAAAAAAAAAAABADH/2gAIAQIBAT8QGdv/xAAdEAEAAgICAwAAAAAAAAAAAAABABEhQVGxYZGh/9oACAEBAAE/EHTZFkDzWXc+YQXlX7G9HQtK9Rw1yzFbnY7Z/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;piada com o tamanho da node_modules&quot;
        title=&quot;piada com o tamanho da node_modules&quot;
        src=&quot;/static/a8023e440fa3cb4d7a930c3c378db219/6aca1/node-modules-size.jpg&quot;
        srcset=&quot;/static/a8023e440fa3cb4d7a930c3c378db219/d2f63/node-modules-size.jpg 163w,
/static/a8023e440fa3cb4d7a930c3c378db219/c989d/node-modules-size.jpg 325w,
/static/a8023e440fa3cb4d7a930c3c378db219/6aca1/node-modules-size.jpg 650w,
/static/a8023e440fa3cb4d7a930c3c378db219/4b190/node-modules-size.jpg 800w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;II - Instanciando o browser&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const puppeteer = require(&amp;#39;puppeteer&amp;#39;)

const browser = await puppeteer.launch({
  headless: false,
  args: [&amp;#39;--disable-notifications&amp;#39;]
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h4&gt;Opções passadas no launch:&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;headless&lt;/code&gt;:&lt;br&gt;
Define se o &lt;strong&gt;puppeteer&lt;/strong&gt; vai abrir a interface gráfica do browser quando for executar o script, por padrão essa opção é &lt;strong&gt;true&lt;/strong&gt;, ou seja, a interface não é aberta. Eu gosto de deixar &lt;strong&gt;false&lt;/strong&gt; para ver a magia acontecendo.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;args&lt;/code&gt;:&lt;br&gt;
Com essa opção você consegue enviar argumentos mais específicos para o chrome. Nesse caso estou passado apenas &lt;code class=&quot;language-text&quot;&gt;--disable-notifications&lt;/code&gt;, para bloquear as notificações do browser, que estavam travando o proceso.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/2186263dbbbd359f8710961a2508f38d/82158/notification.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 56.44171779141104%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsSAAALEgHS3X78AAACMklEQVQoz32STWsTURSG57/4A9y4EIvo2p0oCIoL9111I0qVuBMUlRYFW8SFf8AKClbX7cZ8tzHTmWQyc+crczMfSaZJpsn09dxrEsSiFx7uuRfue85571EqlSqaTRV+twvf74J3OfQjHY3DBmq1Gur1utwrlQrK5TJKpTJ+FEso/gNlMk4RhQEGSYRwEKAW1WH02rAdG5qmQdd1GIaBwWCA0WiEk5MJgJyYzRHx6fKsrK5v4+HTD1grvMOr7R3EaQQec4RhCB5w9Ho9BEGAOEmQTzPsFXU8eP4FTzZ3Udj8hkcvP2P9xScZFzZ2oZxbWcWVm49x4dp93Ft7g1Gawvd8at+H67rgnCOKIkRxArF2vtdx/voGrt7dwuU7W7h445lk5fZbXLr1GoqqmWioBg5+tmAxDykJcqoqoYqEWBzHyPMcizVMj2GrFjS9A5O50Docqs7g+ZzeJVBaBkPbsKG3GfnWxZ9rOByCMQuz2Qye58mKp9MpMp7AYYxsiJEMMziOR95m8o2itSgbcUS0SNT1uktMy4Hj+tjf20eVflgk6Pf7OJ6MMR5PkGUny+R5fioTLwUXNLUO1DnNow46potitQHRiXgwIiEhJveJIJvHmeSMoGh9gTi3yA5Vt2DZHn1MH2H0m16USEK6E/cypvszgn8jBJPBEEk6lu3b5JfYPT+QWGSLadnSIma7/xcUE+C4AUqHKt5//IoOc9BuGzQNTM5mQFNgWQymaZG4Tx9o4xcjjhHT7IIIygAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Notificação do chrome&quot;
        title=&quot;Notificação do chrome&quot;
        src=&quot;/static/2186263dbbbd359f8710961a2508f38d/a6d36/notification.png&quot;
        srcset=&quot;/static/2186263dbbbd359f8710961a2508f38d/222b7/notification.png 163w,
/static/2186263dbbbd359f8710961a2508f38d/ff46a/notification.png 325w,
/static/2186263dbbbd359f8710961a2508f38d/a6d36/notification.png 650w,
/static/2186263dbbbd359f8710961a2508f38d/82158/notification.png 696w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h3&gt;II - Navegando até o POST&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const page = await browser.newPage()&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Cria uma “nova aba” no browser e retorna um objeto do tipo &lt;strong&gt;Page&lt;/strong&gt;.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;await page.goto(config.FACEBOOK.POST_URL)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Navega até a página informada. Nesse caso estou importando essa variavel de config de outro arquivo, mas é bem simples.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;// config.js
const config = {
  COMMENTS_LIMIT: process.env.COMMENTS_LIMIT,
  FACEBOOK: {
    USER_NAME: process.env.USER_NAME,
    PASSWORD: process.env.PASSWORD,
    POST_URL: process.env.POST_URL,
    COMMENT_TEXT: process.env.COMMENT_TEXT
  }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;strong&gt;⚠️⚠️⚠️ USE VARIAVEIS DE AMBIENTE PARA EVITAR COMITAR SUA SENHA SEM QUERER ⚠️⚠️⚠️&lt;/strong&gt;&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;await page.type(&amp;#39;#email&amp;#39;, config.FACEBOOK.USER_NAME)
await page.type(&amp;#39;#pass&amp;#39;, config.FACEBOOK.PASSWORD)
await page.click(&amp;#39;#loginbutton&amp;#39;)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Digita login, senha e clica no botão de login. A função &lt;strong&gt;page.type&lt;/strong&gt; recebe um &lt;a href=&quot;https://www.w3schools.com/cssref/css_selectors.asp&quot;&gt;&lt;strong&gt;selector&lt;/strong&gt;&lt;/a&gt; e o texto que você quer digitar naquele input. A função de &lt;strong&gt;page.click&lt;/strong&gt; segue a mesma lógica.&lt;/p&gt;
&lt;h3&gt;III - Escrevendo os comentários&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;  await page.click(&amp;#39;[contenteditable]&amp;#39;)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Clica naquela caixa de comentários:&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 525px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1c0370f32918525824c89817ccbb7711/52211/comment-box.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 16.56441717791411%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsSAAALEgHS3X78AAAAjklEQVQI13WOsQ7CMAxE+/8fwgyfA3RCIlWaJrYTJynT4WZACInhyfLpfOdJcsFrb+itgUghrAirQERRa0Pr/S/9m31HKYpJa8fldMb9OoMtJISElARhI3gfwVag2s3cPhw7ccGyBDi34un88KpWTESC+fawryyIMmJkRAsc0yDT2I5/Ic6jOCYeHL5EjDefXuQwcY/DAAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Input de comentários do facebook&quot;
        title=&quot;Input de comentários do facebook&quot;
        src=&quot;/static/1c0370f32918525824c89817ccbb7711/52211/comment-box.png&quot;
        srcset=&quot;/static/1c0370f32918525824c89817ccbb7711/222b7/comment-box.png 163w,
/static/1c0370f32918525824c89817ccbb7711/ff46a/comment-box.png 325w,
/static/1c0370f32918525824c89817ccbb7711/52211/comment-box.png 525w&quot;
        sizes=&quot;(max-width: 525px) 100vw, 525px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;E a parte final:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;for (let index = 0; index &amp;lt; config.COMMENTS_LIMIT; index++) {
  await page.keyboard.type(
    config.FACEBOOK.COMMENT_TEXT,
    { delay: 30 }
  )

  await page.keyboard.press(&amp;#39;Enter&amp;#39;)
  await page.waitFor(1000)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Faz um loop besta usando a função &lt;strong&gt;page.keyboard.type&lt;/strong&gt; para simular um teclado.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Porque não usei o &lt;strong&gt;page.type&lt;/strong&gt; nesse caso?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Eu não entendo como funcionam esses &lt;a href=&quot;https://pt-br.reactjs.org/&quot;&gt;reactos&lt;/a&gt; do facebook, mas toda hora o campo fica com um &lt;strong&gt;id&lt;/strong&gt; diferente, então foi mais fácil simular o click na caixa de comentários e depois usar o &lt;strong&gt;page.keyboard&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Usei a opção de delay &lt;code class=&quot;language-text&quot;&gt;{ delay: 30 }&lt;/code&gt; para que fica-se mais parecido com um usuário real digitando, não tenho muita pressa nesse caso já que, se fizer os comentários sem uma pausa, o facebook te bloqueia por um tempo.&lt;/p&gt;
&lt;h1&gt;Resultado final&lt;/h1&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 533px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4d98be4d9e97d51e806fe808b4493da8/a1aa0/kaio_comments.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 138.03680981595093%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAcCAYAAABh2p9gAAAACXBIWXMAAAsSAAALEgHS3X78AAAEJklEQVRIx51V247bNhD1J/WpD2l/uC/tQ1tskQBNAgMt0IcWWaGbeC3ZlqwbKep+sW7k9JCydzd7CdoSGAxFy+PDM2eOV34Qfc+TYsNY+oHzzGIss3TOssLK89JKkbNHkT7dX6dpfhNGbL3K8mbz5ocrsv64oSJXlPCOEnYipeg/r6pqqlUi8uubP28ocOMpy3LJeWJCiAxZyL4fZNd18nQ6Yd8j97JtO5yd5EkHzvH5jEVN0/IVvqghk23vZMITShJBcRQTipvMYo5ghB+hVKQmB0FIjOGcsSXHTBVFSWVZixUKWHEcUV40kv7/MgQBtVgx3lrbG06J/5eU58+U+jz0GoaBiqKiPC8It6K6acFZbW6CULjugpAnldWmE/UVk8M4E3iiaZpJSkUSxTQ3wzjqX6cWMY4TYsR7A846U7huO/OzTdOJVZpmlkYwS5IiAU9ZZr5gsOKtum4I74A7QRnQKXOuSHOm0TKWED9GivqJuvakOVwKts0om7qnUzdhP1DbDl8kTZ4JmnhOTZiojmeU20cBHVaW/dEm341k4JcUBjkF/hLgxCDRsXBVoHmlQX1ZYyioKyo1dj2Vt55Y5UVlvf9lTc7tXh72Ge13Cdm3nA7Ix2NoJBIEMXmeT94xIN+HZCAdOgtfgVOZVYqanpq8AocYHQN9nCBQkI+rluUJpI/o7PiyTjTBZwWoc/lWy6YoG+vH736iv68/yb2T0s7mtHM4OTYjzw1otzvQbu/RdusgduQ4B4OSPpfYUrDVXc5ya54UDf0k86zDPHfE44rKotOjBNlI04DH+Q7lku8L5mVt/f52DWQ7efQKOropuXsBdCmFITNo7jhEaF61VF5EqC3I2XjEWYZZrjGX6LRfwHWWqcBLJjTaZX8iGMSFyKcFdZdZEFCeZhA2RCxqFK9Mvoj3Xja5edYjd7ny04LQ4burNdmbs2ychLa3zMgH5ksRHCeKOHSprx6BhhiOlL6McJGNgmxGeJue2YHq6l/K5h7lfcGHstlBNlouDqTjbBm5rr/IZucCtW2k81A2z14Z/wVG2OM4Sy0ZLRfOaqogbt0E7TqP7ewhumdls379DqPnGNl4rjjLRpxlo8ctAtqjQXzE+MVwcfUl2bhOSCIpTJd1h8PgIpvS+KDxQqC97LUXvtxlyCb0XEoTIVlcm0JxVML/KiMT7YWYJrh0arqrn7Vzv1hQ29f69W+4siu9Q64Oe6GcLVfuQShcWWEqFMxVRRFTuKp5Bu/q7Al36+GVP8zTiKYME2QzQzZzXfVzjz1kM+t/ARMwdW3sd89KmeflTE3ngkw3xX7783va2x7GricWNRSHS6TpYvGMCyNoHXGcGG6fWyjYrTab7Ve/Xq2//fRx+yqKolfHo2/C93UOkEMTMFoTl30cx+b9SzAWf7PfH77+B/ziQwxTQn4NAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;post alvo de comentários&quot;
        title=&quot;post alvo de comentários&quot;
        src=&quot;/static/4d98be4d9e97d51e806fe808b4493da8/a1aa0/kaio_comments.png&quot;
        srcset=&quot;/static/4d98be4d9e97d51e806fe808b4493da8/222b7/kaio_comments.png 163w,
/static/4d98be4d9e97d51e806fe808b4493da8/ff46a/kaio_comments.png 325w,
/static/4d98be4d9e97d51e806fe808b4493da8/a1aa0/kaio_comments.png 533w&quot;
        sizes=&quot;(max-width: 533px) 100vw, 533px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/eptaccio/fbood&quot;&gt;Código no github&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Se tiver algum feedback ou conseguir construir algo legal à partir disso, por favor me chame no twitter &lt;a href=&quot;https://twitter.com/eptaccio&quot;&gt;twitter&lt;/a&gt; ou &lt;a href=&quot;https://t.me/eptaccio&quot;&gt;telegram&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Obrigado por ler até o final. Um salve pro &lt;a href=&quot;https://twitter.com/marcelgsantos&quot;&gt;Marcel&lt;/a&gt; que me apresentou essa ferramenta muito tempo atrás.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Como eu construi um BOT para mixagem de aúdios no telegram]]></title><description><![CDATA[Esse bot é uma continução do meu primeiro post onde mostro como criar um BOT e subir no now.sh. Primeiramente peço perdão a todos DJs…]]></description><link>https://gatsby-starter-blog-demo.netlify.com/dj-marcinho/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.com/dj-marcinho/</guid><pubDate>Sat, 11 Apr 2020 17:43:39 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6bdc2fa5d9194a6227bb45ff985d48a0/3382b/bg.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 66.25766871165644%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAavHKKbA/8QAGRAAAwEBAQAAAAAAAAAAAAAAAQISAAMi/9oACAEBAAEFAgRLqSr1Xf3nc5Uvf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EAB4QAQABAwUBAAAAAAAAAAAAAAEAAiFBESIxUWGB/9oACAEBAAY/AnfVAGx5OaY4TPcNcRbfSf/EAB4QAQACAgEFAAAAAAAAAAAAAAEAETFBIWGBkaGx/9oACAEBAAE/IRmEbaPCalHjQ3PU3l7wBR0z6mZPPTVzIMqyM//aAAwDAQACAAMAAAAQEw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEBAAICAwEAAAAAAAAAAAABEQAhMUFRYfCB/9oACAEBAAE/EBA+6olmheQRw+IeAnz1gvfAKg1+4I3emxog79eMYNE9fBx3cXYAlaUHaJ58Z//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;mesa de audio&quot;
        title=&quot;mesa de audio&quot;
        src=&quot;/static/6bdc2fa5d9194a6227bb45ff985d48a0/6aca1/bg.jpg&quot;
        srcset=&quot;/static/6bdc2fa5d9194a6227bb45ff985d48a0/d2f63/bg.jpg 163w,
/static/6bdc2fa5d9194a6227bb45ff985d48a0/c989d/bg.jpg 325w,
/static/6bdc2fa5d9194a6227bb45ff985d48a0/6aca1/bg.jpg 650w,
/static/6bdc2fa5d9194a6227bb45ff985d48a0/7c09c/bg.jpg 975w,
/static/6bdc2fa5d9194a6227bb45ff985d48a0/01ab0/bg.jpg 1300w,
/static/6bdc2fa5d9194a6227bb45ff985d48a0/3382b/bg.jpg 3822w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Esse bot é uma continução do meu &lt;a href=&quot;/telegram-bot/&quot;&gt;primeiro post&lt;/a&gt; onde mostro como criar um BOT e subir no &lt;a href=&quot;now.sh&quot;&gt;now.sh&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Primeiramente peço perdão a todos DJs, produtores e pessoas que realmente mixam coisas. Isso que vou mostrar é uma brincadeira de final de semana onde tava entediado.&lt;/p&gt;
&lt;p&gt;Eu sempre gostei muito de música, mas infelizmente nunca aprendi tocar nada. E por não saber nada de música também, nunca consegui trabalhar em produções. Esse experimento é uma forma de eu conseguir demonstrar meu amor por música.&lt;/p&gt;
&lt;p&gt;Antes que você desista do texto, porque já escrevi demais, esse é resultado final:&lt;/p&gt;
&lt;p&gt;&lt;div class=&quot;gatsby-resp-iframe-wrapper&quot; style=&quot;padding-bottom: 75%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem&quot; &gt; &lt;div&gt;&lt;iframe src=&quot;https://www.youtube.com/embed/f-t-iY14bSM&quot; style=&quot; position: absolute; top: 0; left: 0; width: 100%; height: 100%; &quot;&gt;&lt;/iframe&gt;&lt;/div&gt; &lt;/div&gt;
&lt;a href=&quot;https://t.me/DjMarcinhoBot&quot;&gt;&lt;em&gt;Converse com o DJ Marcinho no telegram&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Ingredientes&lt;/h2&gt;
&lt;h3&gt;ffmpeg&lt;/h3&gt;
&lt;p&gt;Mixagem de áudio programaticamente é uma coisa muito interessante: para esse bot utilizei o &lt;a href=&quot;https://www.ffmpeg.org/&quot;&gt;ffmpeg&lt;/a&gt;. Uma solução de linha de comando open source para manipulação de áudio.&lt;/p&gt;
&lt;h3&gt;now.sh&lt;/h3&gt;
&lt;p&gt;Uma plataforma para funções serverless que tem limites gratuitos bem generosos para códigos &lt;strong&gt;OPEN SOURCE&lt;/strong&gt;.&lt;/p&gt;
&lt;h3&gt;node.js&lt;/h3&gt;
&lt;p&gt;Ah mano, uma plataforma que usa o V8 da google para tu conseguir criar servidores que rodam javascript.&lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Fluxo&lt;/h2&gt;
&lt;h3&gt;&lt;strong&gt;I&lt;/strong&gt; - Bot aguarda evento de áudio enviado&lt;/h3&gt;
&lt;p&gt;Pra brincadeira ficar mais legal, eu geralmente adiciono esse bot em grupos do Telegram. Como já mencionado, estou utilizando o &lt;a href=&quot;https://github.com/telegraf/telegraf&quot;&gt;telegraf&lt;/a&gt; que felizmente consegue fazer a filtragem de mensagens programaticamente e separar isso em eventos para facilitar nossa vida.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;bot.on([&amp;#39;voice&amp;#39;, &amp;#39;audio&amp;#39;], ctx =&amp;gt; {
 // lógicas aqui pipipi popopo
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;No final acabei inventando umas modas aqui, mas o conceito base é esse.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;II&lt;/strong&gt; - Envia menu com opções de áudio&lt;/h3&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/419fb74749937e5310476c687f9403b3/a0a88/menu.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 64.41717791411043%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwABBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAeYaiNZH/8QAGRAAAwADAAAAAAAAAAAAAAAAAAECERIh/9oACAEBAAEFAmbMmmMwSuf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAWEAEBAQAAAAAAAAAAAAAAAAABEDH/2gAIAQEABj8C1rf/xAAbEAEAAgIDAAAAAAAAAAAAAAABABExoRCRsf/aAAgBAQABPyEtrugZmUsvc9uG5P/aAAwDAQACAAMAAAAQyy//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCn/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHRAAAgEEAwAAAAAAAAAAAAAAAAFRESExYXGRof/aAAgBAQABPxCWtvKRIVbpLY69c0hLpsc/C4v00f/Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;menu do bot quando um áudio chega&quot;
        title=&quot;menu do bot quando um áudio chega&quot;
        src=&quot;/static/419fb74749937e5310476c687f9403b3/6aca1/menu.jpg&quot;
        srcset=&quot;/static/419fb74749937e5310476c687f9403b3/d2f63/menu.jpg 163w,
/static/419fb74749937e5310476c687f9403b3/c989d/menu.jpg 325w,
/static/419fb74749937e5310476c687f9403b3/6aca1/menu.jpg 650w,
/static/419fb74749937e5310476c687f9403b3/7c09c/menu.jpg 975w,
/static/419fb74749937e5310476c687f9403b3/01ab0/menu.jpg 1300w,
/static/419fb74749937e5310476c687f9403b3/a0a88/menu.jpg 1647w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;O projeto tem uma pasta com os áudios na raiz, o bot faz uma lista com o nome dos arquivos utilizando o módulo &lt;strong&gt;fs&lt;/strong&gt;. Isso serve para oferecer no menu posteriormente:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;// avaibleBeats.js

const { getBeatsPath } = require(&amp;#39;lib/path&amp;#39;)

const fs = require(&amp;#39;fs&amp;#39;)

const avaibleBeats = fs.readdirSync(getBeatsPath())

module.exports = {
  avaibleBeats
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;À partir dessa listagem dos áudios disponíveis, montei uma lista de “callback button” (botão de retorno). O telegraf também abstrai isso de um jeito bem fácil.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt; const callBacks = avaibleBeats.map(beat =&amp;gt;
    [Markup.callbackButton(beat, beat)]
  )

  const inlineMessageRatingKeyboard = Markup
    .inlineKeyboard(callBacks).extra(
      // opção para responder diretamente no aúdio
      Extra.inReplyTo(ctx.message.message_id)
    )

  return ctx.reply(
    &amp;#39;Select a style&amp;#39;,
    inlineMessageRatingKeyboard
  )&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h3&gt;&lt;strong&gt;III&lt;/strong&gt; - Faz download do áudio enviado&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const saveFileLocal = async ({ filePath, bot, fileId }) =&amp;gt; {
  const fileLink = await bot.telegram.getFileLink(fileId)

  const { data: fileStream } = await axios({
    url: fileLink,
    responseType: &amp;#39;stream&amp;#39;
  })

  const writeFileStream = fs.createWriteStream(filePath)

  return new Promise((resolve, reject) =&amp;gt; {
    writeFileStream.on(&amp;#39;finish&amp;#39;, resolve)
    writeFileStream.on(&amp;#39;error&amp;#39;, reject)

    fileStream
      .pipe(writeFileStream)
  })
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;strong&gt;Explicando em detalhes:&lt;/strong&gt;&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const fileLink = await bot.telegram.getFileLink(fileId)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;A linha de código acima constrói o link para download do arquivo de áudio enviado pelo usuário.&lt;/p&gt;
&lt;hr&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const { data: fileStream } = await axios({
  url: fileLink,
  responseType: &amp;#39;stream&amp;#39;
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Aqui estou utilizando streams. Caso não esteja familiarizado, veja esse &lt;a href=&quot;https://imasters.com.br/back-end/streams-no-node-js-o-que-sao-streams-afinal-parte-01&quot;&gt;post sobre&lt;/a&gt;. Estou recebendo um fileStream da API do telegram e juntando isso à um writeFileStream, que é um stream de escrita para escrever o arquivo no disco.&lt;/p&gt;
&lt;hr&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;return new Promise((resolve, reject) =&amp;gt; {
  writeFileStream.on(&amp;#39;finish&amp;#39;, resolve)
  writeFileStream.on(&amp;#39;error&amp;#39;, reject)

  fileStream
    .pipe(writeFileStream)
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Como estou retornando uma promise, passei o &lt;strong&gt;resolve&lt;/strong&gt; e &lt;strong&gt;reject&lt;/strong&gt; da promise para os eventos de &lt;strong&gt;finish&lt;/strong&gt; e &lt;strong&gt;error&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Esse bot está rodando em serverless no &lt;a href=&quot;now.sh&quot;&gt;now.sh&lt;/a&gt;. No geral não é possivel escrever no disco de uma função serverless (perdi um tempinho para descobrir isso na primeira vez). Então todos os áudios são salvos na pasta &lt;strong&gt;TEMP&lt;/strong&gt; do &lt;strong&gt;SO&lt;/strong&gt;. &lt;em&gt;Grazadeus&lt;/em&gt; no modulo os do node temos uma função chamada tmpdir que nos passa o caminho da pasta TEMP do SO em questão. Assim fica mais fácil!&lt;/p&gt;
&lt;p&gt;Aqui acabamos entrando em um tópico de privacidade: todos os áudios são &lt;strong&gt;TEMPORÁRIOS&lt;/strong&gt;, nada fica salvo em nenhuma base de dados.&lt;/p&gt;
&lt;h3&gt;&lt;strong&gt;IV&lt;/strong&gt; - Aciona o ffmpeg para fazer o mix do aúdio do usário com a faixa selecionada&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const { stdout, stderr } = spawn(binariePatch, args, {})
  .on(&amp;#39;error&amp;#39;, reject)
  .on(&amp;#39;close&amp;#39;, () =&amp;gt; resolve(outputDirectory))&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Como comentei no inicio do post, estou utilizando o &lt;strong&gt;ffmpeg&lt;/strong&gt;. Isso mesmo! Eu subi o binário juntamente ao deploy e estou executando o mesmo usando o metodo &lt;strong&gt;spawn&lt;/strong&gt; do módulo &lt;strong&gt;child_process&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;child_process&lt;/strong&gt; é um modulo nativo no nodejs que permite que a gente crie novos processos à partir do processo principal. Com esse módulo, o nosso bot cria um processo no SO executando um binário (&lt;strong&gt;ffmpeg&lt;/strong&gt;) com os argumentos que precisava para fazer o mix do áudio acontecer.&lt;/p&gt;
&lt;p&gt;O módulo &lt;strong&gt;child_process&lt;/strong&gt; possui alguns metodos para esse típo de ação, dentre eles: &lt;strong&gt;fork()&lt;/strong&gt;, &lt;strong&gt;spawn()&lt;/strong&gt;, &lt;strong&gt;exec()&lt;/strong&gt; e &lt;strong&gt;execFile()&lt;/strong&gt;. Estou utilizando o método &lt;strong&gt;spawn()&lt;/strong&gt; lançando um novo comando no SO, recebendo como resposta um objeto do tipo &lt;strong&gt;ChildProcess&lt;/strong&gt;, que implementa o &lt;strong&gt;EventEmitter API&lt;/strong&gt; para nos permitir adicionar listeners (ouvintes), como fiz no código acima.&lt;/p&gt;
&lt;p&gt;Argumentos de mix do &lt;strong&gt;ffmpeg&lt;/strong&gt;:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const mergeArgs = [
  &amp;#39;-y&amp;#39;,
  &amp;#39;-i&amp;#39;,
  filePath,
  &amp;#39;-i&amp;#39;,
  beatPath,
  &amp;#39;-filter_complex&amp;#39;,
  &amp;#39;amerge=inputs=2&amp;#39;,
  &amp;#39;-ac&amp;#39;,
  &amp;#39;2&amp;#39;,
  outputDirectory
]&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Essa é a forma que o bot monta os args para o mix de aúdio, no fim isso vai virar algo assim:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;ffmpeg -y -i kaio_do_quebradev.ogg -i NARUTO_SAD_SONG.mp3 -filter_complex amerge=inputs=2 -ac 2 final.mp3&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;em&gt;Você pode executar isso no seu terminal se tiver o &lt;a href=&quot;https://ffmpeg.org/&quot;&gt;binário do &lt;strong&gt;ffmpeg&lt;/strong&gt;&lt;/a&gt;, vai rolar!&lt;/em&gt;&lt;/p&gt;
&lt;h4&gt;&lt;strong&gt;Explicando os argumentos utilizados:&lt;/strong&gt;&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;-y&lt;/code&gt;:&lt;br&gt;
Confirmação de que você quer sobrescrever o arquivo de output, caso ele já exista.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;-i&lt;/code&gt;:&lt;br&gt;
Informa um INPUT, ou seja, um áudio que já existe e será utilizado.&lt;/li&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;-filter_complex&lt;/code&gt;:&lt;br&gt;
Quando precisamos fazer algo mais cabreiro no FFMPEG, usamos essa opção para conseguir chegar no resultado. O filter_complex permite que passemos como argumento para processamento do audio um “filter graph”. Como o nome já diz é bem complexo, então não vou me estender, até porque não sou um especialista no assunto.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Para utilizar esse argumento, estou sempre informando &lt;strong&gt;amerge=inputs=2&lt;/strong&gt; que quer dizer: &lt;strong&gt;Eu quero que você faça o merge de dois streams de áudio em um só.&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code class=&quot;language-text&quot;&gt;-ac&lt;/code&gt;:&lt;br&gt;
Seta o número de canais de áudio. Nessa parte, a gente já começa entrar em uma ciência de foguete, coisa de quem manja de audio real (salve &lt;a href=&quot;https://twitter.com/gustv0_&quot;&gt;Gustavo&lt;/a&gt;). Então se quiser se aprofundar nessa parte, &lt;a href=&quot;https://trac.ffmpeg.org/wiki/AudioChannelManipulation&quot;&gt;confira esse link&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;&lt;strong&gt;V&lt;/strong&gt; - Envia o áudio pro usuário&lt;/h3&gt;
&lt;p&gt;E claro, a cereja do bolo: enviar o resultado para o usuário:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;  await ctx.replyWithAudio({ source: file })&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h3&gt;Visão geral (programática) do processo&lt;/h3&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const selectedBeatName = info.actionName
const { fileId, fileType } = getFileInfo(ctx)
const filePath = getFilePath(fileId)

await saveFileLocal({ filePath, bot, fileId })

const outputMixPath = await mergeAudios({
  filePath,
  fileType,
  beat: selectedBeatName
})

const mixResult = getFileBuffer(outputMixPath)
await sendFile({ fileType, file: mixResult, ctx })&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h2&gt;Deploy&lt;/h2&gt;
&lt;p&gt;Segui basicamente as instruções do &lt;a href=&quot;/telegram-bot/&quot;&gt;meu primeiro post&lt;/a&gt; com um diferencial: na sessão de builds do now.json, informei que o projeto deveria levar os binários do FFMPEG e também as faixas de áudio disponíveis. Se atente ao includeFiles.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;&amp;quot;builds&amp;quot;: [
  {
    &amp;quot;src&amp;quot;: &amp;quot;index.js&amp;quot;,
    &amp;quot;use&amp;quot;: &amp;quot;@now/node-server&amp;quot;,
    &amp;quot;config&amp;quot;: {
      &amp;quot;includeFiles&amp;quot;: [
        &amp;quot;binaries/**&amp;quot;,
        &amp;quot;audios/**&amp;quot;
      ]
    }
  }
]&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h2&gt;Resultado final:&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://t.me/DjMarcinhoBot&quot;&gt;&lt;em&gt;Converse com o DJ Marcinho no telegram&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/eptaccio/dj-telegram-bot&quot;&gt;Código no github&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://zeit.co/eptaccio/djproducerbot/fvnyq8bgc/source&quot;&gt;Código rodando em PROD&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Se tiver algum feedback ou conseguir construir algo legal à partir disso, por favor me chame no &lt;a href=&quot;https://twitter.com/eptaccio&quot;&gt;twitter&lt;/a&gt; ou &lt;a href=&quot;https://t.me/eptaccio&quot;&gt;telegram&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=RxD67KaAJuo&quot;&gt;&lt;span class=&quot;gatsby-resp-image-wrapper&quot; style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 640px;&quot;&gt;
      &lt;span class=&quot;gatsby-resp-image-background-image&quot; style=&quot;padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url(&amp;apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIEBQH/xAAXAQEAAwAAAAAAAAAAAAAAAAADAQIE/9oADAMBAAIQAxAAAAGFPRpIWw6TNCkVXVEH/8QAHBAAAwACAwEAAAAAAAAAAAAAAAIDBBIBETIz/9oACAEBAAEFAsqjKTrRWMiewvW5z5l9T//EABkRAAIDAQAAAAAAAAAAAAAAAAIQARESMf/aAAgBAwEBPwEKyg5K/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/ATaiv//EABsQAAEFAQEAAAAAAAAAAAAAAAEAAhARUUFx/9oACAEBAAY/Ag1vULsjIBxNvZ8j/8QAGxAAAgIDAQAAAAAAAAAAAAAAAREAIRAxQXH/2gAIAQEAAT8h0oRuNq0mwQR32JYUHWCLSnlUAC1P/9oADAMBAAIAAwAAABBDEPz/xAAWEQEBAQAAAAAAAAAAAAAAAAABIDH/2gAIAQMBAT8QDzC//8QAGREAAgMBAAAAAAAAAAAAAAAAAAEQESEx/9oACAECAQE/EKu4XUM//8QAHBAAAwACAwEAAAAAAAAAAAAAAAERIXExQWFR/9oACAEBAAE/EMqnoXnSLuxGy2/PSCM+T0TEvaJhnQypsclIYonV0u6ldkjA/9k=&amp;apos;); background-size: cover; display: block;&quot;&gt;&lt;/span&gt;
  &lt;img class=&quot;gatsby-resp-image-image&quot; alt=&quot;reginaldo&quot; title=&quot;reginaldo&quot; src=&quot;/static/fbd750c50e5dca0da3814d9758203e45/c08c5/reginaldo.jpg&quot; srcset=&quot;/static/fbd750c50e5dca0da3814d9758203e45/d2f63/reginaldo.jpg 163w,
/static/fbd750c50e5dca0da3814d9758203e45/c989d/reginaldo.jpg 325w,
/static/fbd750c50e5dca0da3814d9758203e45/c08c5/reginaldo.jpg 640w&quot; sizes=&quot;(max-width: 640px) 100vw, 640px&quot; style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot; loading=&quot;lazy&quot;&gt;
    &lt;/span&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=RxD67KaAJuo&quot;&gt;DJ Reginaldo, dono da foto do BOT.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Obrigado por ler até o final.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Criando um bot serverless para telegram]]></title><description><![CDATA[Eu gosto muito de criar bots, principalmente no telegram pela facilidade. Na verdade eu sempre fui um grande evangelista do Telegram, quem…]]></description><link>https://gatsby-starter-blog-demo.netlify.com/telegram-bot/</link><guid isPermaLink="false">https://gatsby-starter-blog-demo.netlify.com/telegram-bot/</guid><pubDate>Mon, 06 Apr 2020 17:43:39 GMT</pubDate><content:encoded>&lt;p&gt;Eu gosto muito de criar bots, principalmente no telegram pela facilidade. Na verdade eu sempre fui um grande evangelista do Telegram, quem me conhece sabe disso. Então nada mais justo do que falar sobre bots nessa plataforma que simplifica muito o processo de criação dos mesmos.&lt;/p&gt;
&lt;p&gt;Tá, basicamente vou mostrar duas coisas:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Como criar um chatbot (usando node.js)&lt;/li&gt;
&lt;li&gt;Como deixar ele “rodando” de graça usando o now.sh&lt;/li&gt;
&lt;/ol&gt;
&lt;h2&gt;Criando o bot no telegram&lt;/h2&gt;
&lt;p&gt;É bem fácil criar um bot no telegram, é tão facil que o telegram tem um bot que cria bots, no caso o &lt;a href=&quot;http://t.me/BotFather&quot;&gt;@BotFather&lt;/a&gt;. É bem simples, inicie a conversa com o BotFather, execute o comando &lt;strong&gt;/newbot&lt;/strong&gt; e siga as instruções. No final ele vai te gerar um token para você continuar com o processo.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 416px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0bb9b70bb305fdd80aead4316a4e5231/b0122/token.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 73.61963190184049%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsSAAALEgHS3X78AAADBklEQVQ4y01UyU4bQRD1x0RIEAzY421sjz2LZ5/pGdvjBVBuUSSwDd4AQ3KIlENOkRJAiHxbwBxDvuKluu1YOTzVNvWqurp6UoPxDPObT5heXWO6uMFs8RGza8LVDaYXC8K1wOzyRsjJfOWbk73yLXA2ucB4donX1z9ISZKChupBVRxYWgCj7sEi1Oo2qoaLuulBIak7IVQrELpKuuFHwq43XGSKCrb3cnh6ekZKyWiIqgx+yUNcZmDVEC2ZwdFCeM0O3LANlyUI4g6CZhdulIDZLcRBFw5rw2/2ELZ6kGsGnpdLpOpOANY7hp/0BMLuITySLOmLZJ+IvKgDh4g5YUDJfjVAqEbw2z2KJdDtEFKphuXyBamKaiFKDkUXPgV5R5zAX3fkx12RZHN/nAjisNMXxXmc5zphC4WKuu7Q9MVHnIC1+4jX5AEdJe4eiy75cXliSHFB0ia91RdH5QVNL0ZOXnfIh8yTFd2GJKsoVnWqpqFAMk/yH7i/qBgo1RobySHXGyKeLSkrwl1JhqxZyFU15KhtqbwC11c+IleInAilch38+51MEW//R7ZEM1wTyhUDLKQ5uU0EQQLTpBt2mnDIdgm2E8Min+c1UaFvLTdGky6Rj4Aj7hyJE25mWC0YCLUIbi2Ap4ZwCdz29Ujors7QNhN4RoSA/F8+f8XtwyNu7x/x4/4Bdw8/8e37HRTNxi++h5rD0Dp8B5evB+0d45U7VLl7JC6h4cewWYsWmwnZoAvg86wQgVw3UVZt1Gi5Nx1maX802ni+PmWCojv0GhxhVykpS68gTXPby5WxJ5WFPCBfRqAGns/1zR4W6MZUO6DKEXUTQXcZNP60vJVuBrHQTerU8pvidRgUz9HFFdYbwfU8YflChPk3RRgZA1pGF7D3GzDSGpQDFda+AX1Pg0Yo0Jvfpe54J/v5MrZ2JWylJWzv55HOVbBzUKAZPiH14f0Ak9Eco8FE4HwwxXgww2hI8nS2sYfDCU5GY5wMz3FKcng+xeBsihH9rcazK/rjzPH79RV/AUXcUaH8r1dPAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Criação do token&quot;
        title=&quot;Criação do token&quot;
        src=&quot;/static/0bb9b70bb305fdd80aead4316a4e5231/b0122/token.png&quot;
        srcset=&quot;/static/0bb9b70bb305fdd80aead4316a4e5231/222b7/token.png 163w,
/static/0bb9b70bb305fdd80aead4316a4e5231/ff46a/token.png 325w,
/static/0bb9b70bb305fdd80aead4316a4e5231/b0122/token.png 416w&quot;
        sizes=&quot;(max-width: 416px) 100vw, 416px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Vamos de código&lt;/h2&gt;
&lt;p&gt;Usando node.js vou mostrar uma lib para telegram deveras charmosa chamada Telegraf. A API oficial do telegram possui várias rotas e permite várias coisas, essa lib basicamente encapsula esses métodos para facilitar nossa vida.&lt;/p&gt;
&lt;p&gt;A plataforma do telegram tem suporte a webhooks. É aí que entra nosso futuro deploy usando now.sh. O now é uma plataforma de zeit bem da hora que permite deploy de funções serverless.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/fa86cc8aea743cae903d4afb6ecf3c85/77800/telegram-webhook.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 27.607361963190186%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAAAsSAAALEgHS3X78AAABhUlEQVQY0zVQbSuDURg+XpOQsfZBKUtobL4pyl9QfoekmbGZ9hZtzcuWD8InP4Hy8sUniU9olCjM9jzPeZ6Z9qJkC3O5n2NOXd2dc93Xde7rZrx3BaotSoiBd0eQHttBGUDpVoPSvwp1IApuJX4wBqUzhHz0BPr5KnxAG9kA7yO9zhN0L8aZHZw5CbNQ2BRUc0QIvuMaJDYj3rmoc3SfRM55IPhyoQil0Uua/x5d7wBLtfggGYOQ2gNINnjwMriOs9tL8ONrqNUeyM0+pEzEtwUgkyAzu4/z+ysUlAw04xISPWEkRtfxNByDZPCDJTsWkTKHBJ6NfuSHNmH3u3C6tYtsfQCpZi+SlmVIXSExQdqxhwmvA0/xO7yawni0RvAwvo2EbQVyrUePrI/sqmAaat/qX6SbNEWcoze3iKtSlWk9Wdeh4H/eSlBaaeo6StHkq/Q5wRRqVigar/HQBE5oljX8kKB4IZOB/sk88fPgtQv0gR0595Ew/My+gxuClf2RWRX1kdcvRLZHHQieej0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;Fluxo telegram&quot;
        title=&quot;Fluxo telegram&quot;
        src=&quot;/static/fa86cc8aea743cae903d4afb6ecf3c85/a6d36/telegram-webhook.png&quot;
        srcset=&quot;/static/fa86cc8aea743cae903d4afb6ecf3c85/222b7/telegram-webhook.png 163w,
/static/fa86cc8aea743cae903d4afb6ecf3c85/ff46a/telegram-webhook.png 325w,
/static/fa86cc8aea743cae903d4afb6ecf3c85/a6d36/telegram-webhook.png 650w,
/static/fa86cc8aea743cae903d4afb6ecf3c85/77800/telegram-webhook.png 855w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Basicamente vamos precisar de uma API, para que o telegram chame a mesma quando algum usuário interagir com nosso BOT.&lt;/p&gt;
&lt;h2&gt;Configurando nossa API para Webhook&lt;/h2&gt;
&lt;p&gt;O primeiro passo é criar uma API simples. Nesse exemplo vou usar express pela popularidade.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;// index.js

const express = require(&amp;#39;express&amp;#39;)
const Telegraf = require(&amp;#39;telegraf&amp;#39;)

const app = express()

const APP_PORT = 3000
const { BOT_TOKEN } = process.env
const CURRENT_HOST = &amp;#39;&amp;#39;

// instanciando o bot
const bot = new Telegraf(BOT_TOKEN, {
  telegram: {
    webhookReply: false
  }
})

// configuração de ação tosca no bot
bot.on(&amp;#39;text&amp;#39;, ctx =&amp;gt; {
  return ctx.reply(
    `msg recebida de: ${ctx.message.from.username}`
  )
})

// união entre bot e express
app.use(bot.webhookCallback(&amp;#39;/callback&amp;#39;))

app.get(&amp;#39;/setup&amp;#39;, async (_req, res) =&amp;gt; {
  const url = `${CURRENT_HOST}/callback`
  await bot.telegram.setWebhook(url)
  res.send(`listening on ${CURRENT_HOST}`)
})

app.listen(APP_PORT, () =&amp;gt; {
  console.log(`listening on ${APP_PORT}`)
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;O esquema é criar uma API simples, com uma rota de /setup inicialmente, que vai ser útil mais tarde. Claro, não esqueça de instalar os módulos (express e telegraf).&lt;/p&gt;
&lt;h3&gt;Explicando por partes:&lt;/h3&gt;
&lt;p&gt;1 — Instanciando nosso bot com o TOKEN que você gerou utilizando o BotFather lá no primeiro passo.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;// instanciando o bot
const bot = new Telegraf(BOT_TOKEN, {
  telegram: {
    webhookReply: false
  }
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;2 — Configuração do o Webhook no telegram.&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;app.get(&amp;#39;/setup&amp;#39;, async (_req, res) =&amp;gt; {
  const url = `${CURRENT_HOST}/callback`
  await bot.telegram.setWebhook(url)
  res.send(`listening on ${CURRENT_HOST}`)
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;&lt;em&gt;— Mas Marcos porque você uma rota para isso em vez de fazer na inicialização do código?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Fiz assim para evitar uns pipocos depois de subir no now.sh, foi a melhora forma que encontrei por enquanto.&lt;/p&gt;
&lt;p&gt;Nessa variável &lt;strong&gt;CURRENT_HOST&lt;/strong&gt; vamos adicionar posteriormente a URL que o now vai nos fornecer para acesso da nossa API.&lt;/p&gt;
&lt;p&gt;3 — Definição de ação do BOT&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;// configuração de ação tosca no bot
bot.on(&amp;#39;text&amp;#39;, ctx =&amp;gt; {
  return ctx.reply(
    `msg recebida de: ${ctx.message.from.username}`
  )
})&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Uma coisa legal do telegraf é que podemos definir ações com base em eventos, nesse caso um evento de texto digitado pelo usuário. Nesse caso vamos apenas responder que a mensagem foi respondida.&lt;/p&gt;
&lt;p&gt;4 — União entre telefraf e express&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;app.use(bot.webhookCallback(&amp;#39;/callback&amp;#39;))&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Configuração para a instancia do BOT passar a funcionar e acionar os eventos disponíveis a partir de webhook.&lt;/p&gt;
&lt;h2&gt;Configurando o deploy&lt;/h2&gt;
&lt;p&gt;Man, cria um conta no &lt;a href=&quot;now.sh&quot;&gt;now.sh&lt;/a&gt; depois instala o CLI deles com o npm (npm i -g now).&lt;/p&gt;
&lt;p&gt;No código crie um arquivo chamado now.json na raiz do projeto. Nesse arquivo vamos fazer as configurações necessárias para o deploy da nossa função. Eu estou chamando isso de função pois, apesar de ser uma API no final das contas isso vai virar uma função serveless na estrutura do now, que por fins de curiosidade utiliza o AWS Lambda para funcionar, não me pergunte como esse pessoal ganha dinheiro.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;—Pera pera pera, vamos hospedar o bot nesse role de serveless ai e pa, mas quanto vai custar?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Nada, o now tem uns limites bem generosos de funções rodando, desde que seja open source. A partir do momento que você faz um deploy &lt;strong&gt;no modo FREE seu código fica automaticamente exposto na interwebs&lt;/strong&gt;, portanto fique &lt;strong&gt;LIGEIRO&lt;/strong&gt; com coisas que não devem ser públicas, como o token do bot por exemplo. Utilize variáveis de ambiente. Na verdade, sempre utilize variáveis de ambiente para informações muito sensíveis, me ajude a te ajudar&lt;/p&gt;
&lt;p&gt;A configuração que você precisa montar para o now rodar seu bot é basicamente essa:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;json&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;{
  &amp;quot;version&amp;quot;: 2,
  &amp;quot;alias&amp;quot;: [
    &amp;quot;nome-do-seu-bot-bosta.now.sh&amp;quot;
  ],
  &amp;quot;public&amp;quot;: true,
  &amp;quot;builds&amp;quot;: [
    {
      &amp;quot;src&amp;quot;: &amp;quot;index.js&amp;quot;,
      &amp;quot;use&amp;quot;: &amp;quot;@now/node-server&amp;quot;
    }
  ],
  &amp;quot;routes&amp;quot;: [
    {
      &amp;quot;headers&amp;quot;: {
        &amp;quot;Access-Control-Allow-Origin&amp;quot;: &amp;quot;*&amp;quot;,
        &amp;quot;Access-Control-Allow-Methods&amp;quot;: &amp;quot;GET, POST, PUT, DELETE, OPTIONS&amp;quot;,
        &amp;quot;Access-Control-Allow-Headers&amp;quot;: &amp;quot;X-Requested-With, Content-Type, Accept&amp;quot;
      },
      &amp;quot;src&amp;quot;: &amp;quot;/.*&amp;quot;,
      &amp;quot;dest&amp;quot;: &amp;quot;/index.js&amp;quot;
    }
  ]
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Você pode copiar essa config e substituir a parte do nome-do-seu-bot-bosta para o nome real do seu BOT já que ele já vai funcionar, deixei alguns outros comentários para explicar o que está rolando na config.&lt;/p&gt;
&lt;p&gt;Lembra a variável CURRENT_HOST? Coloque nela o mesmo conteúdo que colocou no seu ALIAS da configuração do now.sh, mas adicionei um https nesse caso. Ex:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;js&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;const CURRENT_HOST = “https://nome-do-seu-bot-bosta.now.sh”&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;h3&gt;Lançando o deploy&lt;/h3&gt;
&lt;p&gt;Abre o terminal ou CMD que tu tem ai e roda:&lt;/p&gt;

        &lt;deckgo-highlight-code language=&quot;bash&quot;  terminal=&quot;carbon&quot; theme=&quot;material&quot; line-numbers=&quot;true&quot; editable=&quot;true&quot; &gt;
          &lt;code slot=&quot;code&quot;&gt;now -e BOT_TOKEN=token-do-seu-bot  - -prod&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
      
&lt;p&gt;Bem simples né? Como é sua primeira vez (ou não) rodando isso, talvez ele te peça para fazer login e após isso ele vai mostrar informações sobre seu deploy.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 650px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/272f9ee765f1ce7558a0b9a1f8375c6c/b4098/now.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 31.288343558282207%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABF0lEQVQY01WO626DMAyF+yiFFkgISYBwKwGSkACBXqT+mKa9/4vM235Nsqwj+3z2OXHZITmhSfFeIkLPCQ4xCVB6wSTEGehfQSKSoYxdYZ7gvwJ96keljdXGzG7plS4n3cy2UiatWz6MpL0FlJ0pjzNG8zKCW/9gOSi3aruYZVWzHbVZtn1e1mFS7U2KpsUZvYI7RmGCAAhjFERJEKMLwB1YlJlmazfvvNduPZ4v/3iu+2FXP2ijZjdANOfA0PQDpryoGlZWUUpOH1+fclIQ3m77th+LP7b7AzB/fzq/u20H+DaMUmnwFFWdUk54nhD6E/v93ljZdHKEY6LpoLNC0ELkogYBxUVFizLjBStFXtXwFlYwTFn+DWAZS7383FYgAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;deploy usando now&quot;
        title=&quot;deploy usando now&quot;
        src=&quot;/static/272f9ee765f1ce7558a0b9a1f8375c6c/a6d36/now.png&quot;
        srcset=&quot;/static/272f9ee765f1ce7558a0b9a1f8375c6c/222b7/now.png 163w,
/static/272f9ee765f1ce7558a0b9a1f8375c6c/ff46a/now.png 325w,
/static/272f9ee765f1ce7558a0b9a1f8375c6c/a6d36/now.png 650w,
/static/272f9ee765f1ce7558a0b9a1f8375c6c/b4098/now.png 816w&quot;
        sizes=&quot;(max-width: 650px) 100vw, 650px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Feito isso precisamos fazer a configuração do webhook no telegram chamando a rota &lt;strong&gt;/setup&lt;/strong&gt; da nossa API. Então é so acessar a sua URL configurada na rota de setup.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 539px;&quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/bd9c4b0ff3ec065de166e2722981ba38/10f9a/setup.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 33.12883435582822%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAAA1klEQVQY052MzQ7BQBSF51Fs/CsWEr8tStoITyERtFStRbwYiU6n1rXQ4knamWm4iaQLLMSXk3tPzsm9aKLp+spcmGvNWM2XBkzdMOMZC6qptnhppi/Hk+lmu0PVllQT28pwVBc7DbHblpVOT5VkpdtX5b4KHgzklWozK5RTOSGdL2YKpUQy01MGaH84YEIwxhaG7diEgJyTY2H7aFk2cbBNXPd8vd4834918bzb/Y4opUEQMMYoDTl7A0rKOI+i6PEBhOjxA9E34PdPx1/hnCP2L2EYPgGVvEQCvg8a8wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;get na rota de setup usando o browser&quot;
        title=&quot;get na rota de setup usando o browser&quot;
        src=&quot;/static/bd9c4b0ff3ec065de166e2722981ba38/10f9a/setup.png&quot;
        srcset=&quot;/static/bd9c4b0ff3ec065de166e2722981ba38/222b7/setup.png 163w,
/static/bd9c4b0ff3ec065de166e2722981ba38/ff46a/setup.png 325w,
/static/bd9c4b0ff3ec065de166e2722981ba38/10f9a/setup.png 539w&quot;
        sizes=&quot;(max-width: 539px) 100vw, 539px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Se correu tudo bem até aqui seu bot já vai estar respondendo.&lt;/p&gt;
&lt;p&gt;E ai é você e sua criatividade. Veja o que mais o telegraf tem a oferecer para montar seus bots da hora.&lt;/p&gt;
&lt;p&gt;Se tiver algum feedback ou conseguir construir algo legal por favor me chame no &lt;a href=&quot;https://twitter.com/eptaccio&quot;&gt;twitter&lt;/a&gt; ou &lt;a href=&quot;https://t.me/eptaccio&quot;&gt;telegram&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Isso é tudo por enquanto, se pá eu volto mostrando como integrar seu BOT em mais plataformas.&lt;/p&gt;</content:encoded></item></channel></rss>